# stm32 / C

## C

### `sprintf()`

```c
int sprintf(char *str, const char *format, ...)
```

发送格式化输出到 str 所指向的字符串。

### `strtok()`

```c
char *strtok(char s[], const char *delim);
```

1. 定义

   分解字符串为一组字符串。s 为要分解的字符，delim 为分隔符字符(如果传入字符串，则传入的字符串中每个字符均为分割符)。首次调用时，s 指向要分解的字符串，**之后再次调用要把 s 设成 NULL**。在头文件#include<string.h>中。

2. 说明
   (1) 当 strtok() 在参数 s 的字符串中发现参数 delim 中包含的分割字符时,则会将该字符改为\0 字符。在第一次调用时，strtok()必需给予参数 s 字符串，往后的调用则将参数 s 设置成 NULL。每次调用成功则返回指向被分割出片段的指针。

   (2) 返回值

   **返回第一个子字符串的指针。每次调用 strtok(NULL, ",")会继续返回下一个子字符串的指针，直到遇到字符串末尾或者没有更多的子字符串为止。**

   从 s 开头开始的一个个被分割的串。当 s 中的字符查找到末尾时，返回 NULL。如果查找不到 delim 中的字符时，返回当前 strtok 的字符串的**指针**。所有 delim 中包含的字符都会被滤掉，并将被滤掉的地方设为一处分割的节点。

   (3) 需要注意的是，使用该函数进行字符串分割时，会破坏被分解字符串的完整，调用前和调用后的 s 已经不一样了。第一次分割之后，原字符串 str 是分割完成之后的第一个字符串，剩余的字符串存储在一个静态变量中，因此多线程同时访问该静态变量时，则会出现错误。

## stm32 / HAL
